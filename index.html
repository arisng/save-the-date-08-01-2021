<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <title>Save the date 08-01-2021</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta property="og:image" content="https://arisng.github.io/save-the-date-08-01-2021/images/couple-2.jpg" />

    <link href="https://fonts.googleapis.com/css?family=Allura|Quicksand&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="./css/style.css" />
    <!-- <link rel="stylesheet" href="./css/style.min.css" /> -->
  </head>

  <body>
    <div class="content-container">
      <div class="card-container">
        <img class="card-background" src="./images/gold-wedding-card-bg.png" />

        <p class="overlay title">We're getting married</p>

        <h1 class="overlay spouse1">Đ ình Tin</h1>
        <h2 class="overlay vs">AND</h2>
        <h2 class="overlay spouse2">Thu Linh</h2>

        <div class="overlay countdownContainer"></div>

        <div class="overlay venue">
          <div class="flex-fill overlay venue2">
            <p class="invitation">invite you</p>
            <p class="invitation">to celebrate our marriage</p>
            <!-- <p class="invitation">on friday</p> -->
            <p class="datetime" style="margin-top: 4px;">08 | 01 | 2021</p>
            <p class="time" style="margin-top: 0px;"><b>on friday, at 5:30 pm</b></p>
            <p class="place"><b>Quinter Center | sảnh Diamond</b> <i>86 Trần Phú - Nha Trang</i></p>
            <p class="">
              <a href="https://g.page/quinter-central-nha-trang?share" target="_blank">
                <img src="./images/location-pin.svg" width="13px">map
              </a>
            </p>
          </div>
        </div>
      </div>

      <div class="form-container">
        <img src="./images/gold-border-frame-bg-3.png" style="width: 100%; min-height: 700px;">

        <form id="form1" class="needs-validation" novalidate>
          <div class="form-group mb-4">
            <label for="name" class="ml-4">✨ Tên của bạn 🎉</label>
            <input type="text" class="form-control" name="name" id="name" placeholder="nhớ điền tên nhé"
              autocomplete="off" required>
            <div class="valid-feedback">✅</div>
            <div class="invalid-feedback">nhớ điền tên nè</div>
          </div>

          <div class="form-group mb-4">
            <label>📢 Để có một bữa tiệc được chu đáo nhất, xin bạn vui lòng
              xác nhận sự hiện diện của mình nhé</label>

            <div class="custom-control custom-radio mb-2">
              <input type="radio" class="custom-control-input" id="customRadio1" name="confirmation" value="yes"
                required>
              <label class="custom-control-label" for="customRadio1">Chắc chắn đi 😍🙌</label>
            </div>

            <div class="custom-control custom-radio">
              <input type="radio" class="custom-control-input" id="customRadio2" name="confirmation" value="no">
              <label class="custom-control-label" for="customRadio2">Rất tiếc, tôi không tham dự được 😒</label>
              <small>nhớ đòi số tài khoản của chú rể nhé 😜</small>
              <div class="valid-feedback">✅</div>
            </div>
          </div>

          <div class="form-group mb-4">
            <label for="wishes">💌 Đôi lời tâm sự với Cô Dâu và Chú Rể 😊</label>
            <textarea class="form-control" id="wishes" rows="7" name="wishes" required></textarea>
            <div class="valid-feedback">✅</div>
            <div class="invalid-feedback">chúc gì đó đi 😘</div>
          </div>

          <div class="form-group d-flex form-group justify-content-center">
            <button id="submitBtn" class="btn" type="submit">Xác Nhận</button>
          </div>

        </form>
      </div>
    </div>

    <!-- <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> -->
    <script src="https://code.jquery.com/jquery-3.5.0.min.js"></script>
    <script async src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <script async src="./js/jquery.countdown.min.js"></script>
    <script type="text/javascript">
      //https://rendro.github.io/countdown/
      $(function () {
        $(".countdownContainer").countdown({
          date: "January 8, 2021 18:00:00",
          displayYear: false,
          //date: "February 16, 2020 23:15:00",
          render: function (date) {
            this.el.innerHTML =
              date.days +
              " days, " +
              this.leadingZeros(date.hours) +
              " hours, " +
              this.leadingZeros(date.min) +
              " min and " +
              this.leadingZeros(date.sec) +
              " sec";
          },
          onEnd: () => {
            alert("happy wedding!");
          }
        });
      });


      // Serialize form via jQuery
      (function ($) {
        $.fn.serializeFormJSON = function () {

          var o = {};
          var a = this.serializeArray();
          $.each(a, function () {
            if (o[this.name]) {
              if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
              }
              o[this.name].push(this.value || '');
            } else {
              o[this.name] = this.value || '';
            }
          });
          return o;
        };
      })(jQuery);

      let isFormValid = false;

      $(document).ready(function () {
        let windowHeight = $(window).innerHeight();
        let cardHeight = $(".card-container").outerHeight();

        let offset = windowHeight - cardHeight;

        if (offset > 0) {
          // $(".card-container").css("top", `${offset / 4}px`);
          $(".card-container").css("top", `5vh`);
        }

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.getElementsByClassName('needs-validation');
        // Loop over them and prevent submission
        var validation = Array.prototype.filter.call(forms, function (form) {
          form.addEventListener('submit', function (event) {
            event.preventDefault();
            event.stopPropagation();

            if (form.checkValidity() === false) {

            }
            else {
              isFormValid = true;

              let data = $(this).serializeFormJSON();
              console.log(data)

              submitForm(data);
            }

            form.classList.add('was-validated');
          }, false);
        });
      });

      function submitForm(data) {
        let $form = $('#form1');
        let url = 'https://script.google.com/macros/s/AKfycbwtFDR1OcQ66PskJoetEljs2unrTo14OKOIUYMcyj9lvfIYtuBi/exec';

        // let data = $form.serialize();
        // console.log(data)

        var jqxhr = $.ajax({
          url: url,
          method: "GET",
          dataType: "json",
          data: data,
          success: function (result) {
            console.log("submitted successfully.")
            Swal.fire({
              title: 'Sweet!',
              text: 'Thank You',
              imageUrl: 'https://raw.githubusercontent.com/arisng/save-the-date-08-01-2021/tin-wedding/images/couple-2.jpg',
              imageWidth: 278,
              imageHeight: 389,
              imageAlt: 'couple',
            })
          }
        });
      }

    </script>
  </body>

</html>