var biModalGlobal="";var BiModal=typeof Class==="object"?Class.create():function(a,b){this.initialize(a,b)};jQuery(function(a){BiModal.prototype={$documentBody:a("body"),defaultOptions:{title:"",body:"",size:"medium",height:"",width:"",href:"",imgsrc:"",iframe:{id:"",width:"100%",height:"552px"},promptForInput:false,showPrimaryButton:true,showDefaultButton:true,primaryButtonTitle:"Save Changes",defaultButtonTitle:"Close",closeButtonHtml:'<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>',afterShow:undefined,afterShown:undefined,beforeHide:undefined,afterHide:undefined,showFooter:true,modal:{show:true,backdrop:true}},initialize:function(b,d){var c=this;c.$iframe=undefined;c.options=jQuery.extend(true,{},c.defaultOptions);jQuery.noConflict();c.container={id:b,$modal:a('<div id="'+b+'"class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-alert-label" aria-hidden="true">'),$dialog:a('<div class="modal-dialog">'),$content:a('<div class="modal-content">'),$header:a('<div class="modal-header">'),$closeButton:a('<button type="button" class="close" data-dismiss="modal">'),$title:a('<h4 class="modal-title" id="modal-alert-label">Modal title</h4>'),$body:a('<div class="modal-body">'),$footer:a('<div class="modal-footer">'),$defaultButton:a('<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>'),$primaryButton:a('<button type="button" class="btn btn-primary">Save changes</button>'),$loadingIcon:a('<i class="fa fa-refresh fa-spin"></i>')};c.setOptions(d);c._build()},_build:function(){var b=this;b.container.$footer.append(b.container.$defaultButton).append(b.container.$primaryButton);b.container.$header.append(b.container.$closeButton).append(b.container.$title);b.container.$content.append(b.container.$header).append(b.container.$body).append(b.container.$footer);b.container.$dialog.append(b.container.$content);b.container.$modal.append(b.container.$dialog).attr("id",b.container.id);b.$documentBody.prepend(b.container.$modal);b.container.$modal.on("show.bs.modal",function(c){b._makeCallback(b.options.afterShow,c)});b.container.$modal.on("shown.bs.modal",function(c){b._makeCallback(b.options.afterShown,c)});b.container.$modal.on("hide.bs.modal",function(c){b._makeCallback(b.options.beforeHide,c)});b.container.$modal.on("hidden.bs.modal",function(c){b._makeCallback(b.options.afterHide,c)})},_makeCallback:function(c,b){if(typeof c==="function"){c(b)}},resizeIframe:function(){var c=this;var d=150;var b=(window.innerHeight-c.container.$header.outerHeight()-c.container.$footer.outerHeight());b=c.options.size=="full"||(window.BasicInvite&&window.BasicInvite.IsMobile())?b:(window.innerHeight-c.container.$header.outerHeight()-c.container.$footer.outerHeight()-d);this.$iframe.css({height:(b+"px")})},setHref:function(){var c=this;var d=this.options.iframe.id==""?"modal-iframe":this.options.iframe.id;var b=this.options.size=="full"?((window.innerHeight)+"px"):this.options.iframe.height;this.$iframe=a('<iframe id="'+d+'" name="'+d+'" style="width:'+this.options.iframe.width+";height:"+b+';border:0;" scrolling="auto" />');if(this.options.href.length>0){this.$iframe.attr("src",this.options.href);this.$iframe.on("load",function(){c.container.$loadingIcon.remove();c.resizeIframe()});a(window).on("resize",function(){c.resizeIframe()});this.container.$body.css("overflow","auto").css("padding","0px").css("-webkit-overflow-scrolling:touch;");this.container.$title.append(this.container.$loadingIcon);this.container.$body.html(this.$iframe);this.container.$primaryButton.hide()}else{this.container.$body.find("#"+d).remove()}},setImgSrc:function(){var b=this;this.options.imgsrc=this.options.imgsrc.replace("cache=off","cache=on");var d=a('<img src="/js/spacer.gif" />');var c=a('<img id="modal-img" />').attr("src",this.options.imgsrc).on("load",function(){b.setWidth(a(this).get(0).naturalWidth);d.css({position:"absolute",top:0,left:0,width:a(this).get(0).naturalWidth,height:a(this).get(0).naturalHeight})});if(this.options.imgsrc.length>0){b.setWidth(c.get(0).naturalWidth);this.container.$body.html(c).append(d);this.container.$primaryButton.hide()}else{this.container.$body.find("#modal-img").remove()}},setHeight:function(b){if(width>0){this.options.height=b}this.container.$dialog.css("width",this.options.height)},setWidth:function(b){if(b>0){this.options.width=b}this.container.$dialog.css("width",this.options.width)},setOptions:function(b){a.extend(true,this.options,b);this.setSize();this.setTitle();this.setBody();this.setHref();this.setImgSrc();this.setWidth();this.setFooter();this.setVisibility();this.setButtonTitles();this.container.$closeButton.html(this.options.closeButtonHtml)},setVisibility:function(){this.container.$closeButton.show();this.options.showPrimaryButton?this.container.$primaryButton.show():this.container.$primaryButton.hide();this.options.showDefaultButton?this.container.$defaultButton.show():this.container.$defaultButton.hide()},setFooter:function(){this.options.showFooter?this.container.$footer.show():this.container.$footer.hide()},setBody:function(b){this.options.body=b||this.options.body;this.container.$body.html(this.options.body)},setTitle:function(b){this.options.title=b||this.options.title;this.container.$title.html(this.options.title+" ")},setButtonTitles:function(b){b=b?b:{primaryButtonTitle:this.options.primaryButtonTitle,defaultButtonTitle:this.options.defaultButtonTitle};this.container.$primaryButton.html(b.primaryButtonTitle||this.options.primaryButtonTitle);this.container.$defaultButton.html(b.defaultButtonTitle||this.options.defaultButtonTitle)},reset:function(){this.setOptions(this.defaultOptions);if(this.container){this.container.$primaryButton.attr("data-dismiss","").html("Save Changes").show();this.container.$defaultButton.attr("data-dismiss","modal").html("Close").show();this.container.$modal.removeClass("modal-fullscreen")}},setSize:function(b){if(typeof b==="string"){this.setOptions({size:b})}var c="";switch(this.options.size.toLowerCase()){case"small":c="modal-sm";break;case"medium":c="";break;case"large":c="modal-lg";break;case"xlarge":c="modal-lg modal-xlg";if(window.BasicInvite&&window.BasicInvite.IsMobile()){c="";this.container.$modal.addClass("modal-fullscreen")}break;case"full":this.container.$modal.addClass("modal-fullscreen");break}this.container.$dialog.attr("class","").addClass("modal-dialog").addClass(c);return this},show:function(b){if(typeof b!=="undefined"){this.setOptions(b)}this.container.$modal.modal(this.options.modal)},hide:function(){this.container.$modal.modal("hide")},remove:function(){this.container.$modal.removeData("bs.modal");this.container.$modal.remove()},message:function(c,d,b){this.options.title=d||"ALERT";this.options.body=c;this.options.size="small";this.setOptions(b);this.container.$defaultButton.hide();this.container.$primaryButton.attr("data-dismiss","modal").html("Ok").show();this.options.modal.backdrop="static";this.show()},alert:function(d,b){var c={backdrop:"static",keyboard:false};b=a.extend(true,{},b,{modal:c});this.message(d,"ALERT",b)},prompt:function(f,d,g,c){this.options.title="CONFIRM";this.options.body=f;if(c&&c.promptForInput){this.options.body+="<textarea id='bi-modal-prompt-input'></textarea>"}this.options.primaryButtonTitle=c&&c.primaryButtonTitle?c.primaryButtonTitle:"Continue";var e={backdrop:"static",keyboard:false};c=a.extend(true,{},c,{modal:e});this.setOptions(c);this.container.$defaultButton.html((c&&c.defaultButtonTitle?c.defaultButtonTitle:"Cancel")).show();this.container.$primaryButton.attr("data-dismiss","modal").html(this.options.primaryButtonTitle).show();this.container.$closeButton.hide();this.show();var b=this;this.container.$primaryButton.on("click.prompt",function(){var h={input:a("#bi-modal-prompt-input").val()};b._makeCallback(d,h);b.container.$primaryButton.off("click.prompt")});this.container.$defaultButton.on("click.prompt",function(){var h={input:a("#bi-modal-prompt-input").val()};b._makeCallback(g,h);b.container.$defaultButton.off("click.prompt")})},error:function(c,b){this.options.title="Error";this.options.body=c;this.options.showDefaultButton=false;this.setOptions(b);this.container.$primaryButton.attr("data-dismiss","modal").html("Ok").show();this.show()}};biModalGlobal=new BiModal("biModalGlobal")});